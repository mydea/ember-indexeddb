<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>IndexedDbConfiguration - ember-indexeddb</title>
    <meta name="description" content="A utility for using IndexedDB with ember &amp; ember-data">
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700' rel='stylesheet' type='text/css'>
    

</head>
<body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">
              <img src="../assets/img/ember-logo.png" alt="enterprise logo">
            <span>indexeddb</span>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="nav">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/mydea/ember-indexeddb" class="fa fa-github github"></a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div id="main-wrapper" class="row">
        <div id="content-wrapper">
            <ol class="panel-group" id="sidebar" role="tablist" aria-multiselectable="true">
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-search-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-search" aria-expanded="true" aria-controls="collapseOne">
                        Search
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-search" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-search-heading">
                        <div class="panel-body">
                            <div id="api-tabview-filter">
                                <input type="search" id="api-filter" placeholder="Search...">
                            </div>
                        </div>
                    </div>
                </li>
                    <li class="panel panel-default">
                        <div class="panel-heading" role="tab" id="sidebar-version-heading">
                            <h4 class="panel-title">
                                <a role="button" href="https://github.com/mydea/ember-indexeddb/commits/v3.0.0-beta.1" target="_blank">
                                  Tag: v3.0.0-beta.1
                                </a>
                            </h4>
                        </div>
                    </li>
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-modules-heading">
                        <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" href="#sidebar-modules" aria-expanded="true" aria-controls="collapseOne">
                      Modules
                    </a>
                  </h4>
                    </div>
                    <div id="sidebar-modules" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-modules-heading">
                        <div class="panel-body">
                                <ol>
                                        <li>
                                            <a href="../modules/Ember Data.html">Ember Data</a>
                                        </li>
                                        <li>
                                            <a href="../modules/Services.html">Services</a>
                                        </li>
                                        <li>
                                            <a href="../modules/Test Helpers.html">Test Helpers</a>
                                        </li>
                                        <li>
                                            <a href="../modules/Usage.html">Usage</a>
                                                    <li class="sub"><a href="../modules/Setup.html">Setup</a></li>
                                                    <li class="sub"><a href="../modules/Configuring your database.html">Configuring your database</a></li>
                                                    <li class="sub"><a href="../modules/Querying &amp; Inserting data.html">Querying &amp; Inserting data</a></li>
                                        </li>
                                        <li>
                                            <a href="../modules/Utils.html">Utils</a>
                                        </li>
                                </ol>
                        </div>
                    </div>
                </li>
            
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-classes-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-classes" aria-expanded="true" aria-controls="collapseOne">
                        Classes
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-classes" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-classes-heading">
                        <div class="panel-body">
                            <ol>
                                    <li>
                                        <a href="../classes/IndexedDb.html">IndexedDb</a>
                                    </li>
                                    <li>
                                        <a href="../classes/IndexedDbAdapter.html">IndexedDbAdapter</a>
                                    </li>
                                    <li>
                                        <a href="../classes/IndexedDbConfiguration.html">IndexedDbConfiguration</a>
                                    </li>
                                    <li>
                                        <a href="../classes/IndexedDbSerializer.html">IndexedDbSerializer</a>
                                    </li>
                                    <li>
                                        <a href="../classes/ModelBulkSave.html">ModelBulkSave</a>
                                    </li>
                                    <li>
                                        <a href="../classes/ModelBulkSaver.html">ModelBulkSaver</a>
                                    </li>
                            </ol>
                        </div>
                    </div>
                </li>
            </ol>
            <div class="content-container">
                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">


<div class="page-header">
    <h1> <i class="fa fa-bookmark-o" aria-hidden="true"></i> IndexedDbConfiguration Class
            <a class="pull-right file-edit" href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L6" target="_blank">
              <i class="fa fa-pencil" aria-hidden="true"></i>
            </a>
    </h1>
</div>


<div class="content-meta">


            Module: <a href="../modules/Services.html">Services</a>


        <div class="foundat">
            Defined In: <a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L6">addon/services/indexed-db-configuration.js:6</a>
        </div>
</div>



  <div class="class-description">
  <p>This service should be overwritten to configure IndexedDB.
Overwrite the <code>mapTable</code> property &amp; add <code>versionX</code> properties to fit your application.</p>

  </div>

<div>
    <div class="page-section">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#tab_index" aria-controls="tab_index" role="tab" data-toggle="tab">Index</a></li>
            <li role="presentation"><a href="#tab_methods" aria-controls="tab_methods" role="tab" data-toggle="tab">Methods</a></li>

            <li role="presentation"><a href="#tab_properties" aria-controls="tab_properties" role="tab" data-toggle="tab">Properties</a></li>


        </ul>

        <!-- Tab panes -->
        <div class="tab-content">

              <form id="options-form" class="form-inline">
                  Show:
                  <label for="api-show-inherited" class="checkbox">
                      <input type="checkbox" id="api-show-inherited" checked>
                      Inherited
                  </label>
          
                  <label for="api-show-protected" class="checkbox">
                      <input type="checkbox" id="api-show-protected">
                      Protected
                  </label>
          
                  <label for="api-show-private" class="checkbox">
                      <input type="checkbox" id="api-show-private">
                      Private
                  </label>
                  <label for="api-show-deprecated" class="checkbox">
                      <input type="checkbox" id="api-show-deprecated">
                      Deprecated
                  </label>
          
              </form>

          <div id="tab_index" role="tabpanel" class="tab-pane active" >
                  <div class="index-section methods">
                      <h3>Methods</h3>

                      <ul class="index-list methods">
                              <li class="index-item method private">
                                  <a href="#method__cleanObject">_cleanObject</a>

                              </li>
                              <li class="index-item method private">
                                  <a href="#method__toString">_toString</a>

                              </li>
                              <li class="index-item method private">
                                  <a href="#method__toZeroOne">_toZeroOne</a>

                              </li>
                              <li class="index-item method public">
                                  <a href="#method_mapItem">mapItem</a>

                              </li>
                              <li class="index-item method public">
                                  <a href="#method_setupDatabase">setupDatabase</a>

                              </li>
                      </ul>
                  </div>

                  <div class="index-section properties">
                      <h3>Properties</h3>

                      <ul class="index-list properties">
                              <li class="index-item property public">
                                  <a href="#property_currentVersion">currentVersion</a>

                              </li>
                              <li class="index-item property protected">
                                  <a href="#property_mapTable">mapTable</a>

                              </li>
                      </ul>
                  </div>


          </div>

              <div id="tab_methods" role="tabpanel" class="tab-pane">
                  <div class="item-list">
  <div id="method__cleanObject" class="method item private">
  	<span class="method-signature">
  	<span class="name anchorable-toc">
  		<a class="fa fa-link toc-anchor" href="#method__cleanObject"></a>
  		_cleanObject
  	</span>
  
  		<div class="args">
  			<span class="paren">(</span><ul class="args-list inline commas">
  				<li class="arg">
  						<code>data</code>
  				</li>
  			</ul><span class="paren">)</span>
  		</div>
  		<span class="returns-inline">
  			<span class="type">Id, type, attributes:</span>
  		</span>
  	</span>
  
  
  
  		<span class="flag private">private</span>
  
  
  
  
  	<div class="meta">
  				<p>
  				Defined in
  		<a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L187">addon/services/indexed-db-configuration.js:187</a>
  		</p>
  
  
  
  	</div>
  
  	<div class="description"><p>Cleanup a json object.
  This will convert array-like structures to actual arrays for saving.
  It will strip out meta properties etc.</p>
  </div>
  
  		<div class="params">
  			<h4>Parameters:</h4>
  
  			<ul class="params-list">
  				<li class="param">
  						<code class="param-name">data</code>
  						<span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
  
  
  
  				</li>
  			</ul>
  		</div>
  
  		<div class="returns">
  			<h4>Returns:</h4>
  
  			<div class="returns-description">
  						<span class="type">Id, type, attributes:</span>:
  					<p>, relationships: {}}}</p>
  
  			</div>
  		</div>
  
  </div>
  <div id="method__toString" class="method item private">
  	<span class="method-signature">
  	<span class="name anchorable-toc">
  		<a class="fa fa-link toc-anchor" href="#method__toString"></a>
  		_toString
  	</span>
  
  		<div class="args">
  			<span class="paren">(</span><ul class="args-list inline commas">
  				<li class="arg">
  						<code>val</code>
  				</li>
  			</ul><span class="paren">)</span>
  		</div>
  		<span class="returns-inline">
  			<span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a></span>
  		</span>
  	</span>
  
  
  
  		<span class="flag private">private</span>
  
  
  
  
  	<div class="meta">
  				<p>
  				Defined in
  		<a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L241">addon/services/indexed-db-configuration.js:241</a>
  		</p>
  
  
  
  	</div>
  
  	<div class="description"><p>Convert a property to a string.</p>
  </div>
  
  		<div class="params">
  			<h4>Parameters:</h4>
  
  			<ul class="params-list">
  				<li class="param">
  						<code class="param-name">val</code>
  						<span class="type">Mixed</span>
  
  
  
  				</li>
  			</ul>
  		</div>
  
  		<div class="returns">
  			<h4>Returns:</h4>
  
  			<div class="returns-description">
  						<span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a></span>
  			</div>
  		</div>
  
  </div>
  <div id="method__toZeroOne" class="method item private">
  	<span class="method-signature">
  	<span class="name anchorable-toc">
  		<a class="fa fa-link toc-anchor" href="#method__toZeroOne"></a>
  		_toZeroOne
  	</span>
  
  		<div class="args">
  			<span class="paren">(</span><ul class="args-list inline commas">
  				<li class="arg">
  						<code>val</code>
  				</li>
  				<li class="arg">
  						<code>noneValue</code>
  				</li>
  			</ul><span class="paren">)</span>
  		</div>
  		<span class="returns-inline">
  			<span class="type">1  |  0</span>
  		</span>
  	</span>
  
  
  
  		<span class="flag private">private</span>
  
  
  
  
  	<div class="meta">
  				<p>
  				Defined in
  		<a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L253">addon/services/indexed-db-configuration.js:253</a>
  		</p>
  
  
  
  	</div>
  
  	<div class="description"><p>Convert a boolean to 1/0.
  Optionally, you can specify the value that should be used if the given value does not exist in the payload.
  For example, if you want that a given value should be 1 if not found in the payload, use <code>this._toZeroOne(value, 1)</code>.</p>
  </div>
  
  		<div class="params">
  			<h4>Parameters:</h4>
  
  			<ul class="params-list">
  				<li class="param">
  						<code class="param-name">val</code>
  						<span class="type">Mixed</span>
  
  
  
  				</li>
  				<li class="param">
  						<code class="param-name">noneValue</code>
  						<span class="type">0  |  1</span>
  
  
  					<div class="param-description"><p>The value to use if val is null/undefined.</p>
  </div>
  
  				</li>
  			</ul>
  		</div>
  
  		<div class="returns">
  			<h4>Returns:</h4>
  
  			<div class="returns-description">
  						<span class="type">1  |  0</span>
  			</div>
  		</div>
  
  </div>
  <div id="method_mapItem" class="method item public">
  	<span class="method-signature">
  	<span class="name anchorable-toc">
  		<a class="fa fa-link toc-anchor" href="#method_mapItem"></a>
  		mapItem
  	</span>
  
  		<div class="args">
  			<span class="paren">(</span><ul class="args-list inline commas">
  				<li class="arg">
  						<code>type</code>
  				</li>
  				<li class="arg">
  						<code>item</code>
  				</li>
  			</ul><span class="paren">)</span>
  		</div>
  		<span class="returns-inline">
  			<span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
  		</span>
  	</span>
  
  
  
  		<span class="flag public">public</span>
  
  
  
  
  	<div class="meta">
  				<p>
  				Defined in
  		<a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L120">addon/services/indexed-db-configuration.js:120</a>
  		</p>
  
  
  
  	</div>
  
  	<div class="description"><p>Map a payload to a database table.
  This will use the function provided in mapTable to get a payload to insert into IndexedDB.
  Returns null if no map function is found for the type.</p>
  </div>
  
  		<div class="params">
  			<h4>Parameters:</h4>
  
  			<ul class="params-list">
  				<li class="param">
  						<code class="param-name">type</code>
  						<span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a></span>
  
  
  					<div class="param-description"><p>The type of object to map</p>
  </div>
  
  				</li>
  				<li class="param">
  						<code class="param-name">item</code>
  						<span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
  
  
  					<div class="param-description"><p>The data to map</p>
  </div>
  
  				</li>
  			</ul>
  		</div>
  
  		<div class="returns">
  			<h4>Returns:</h4>
  
  			<div class="returns-description">
  						<span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
  			</div>
  		</div>
  
  </div>
  <div id="method_setupDatabase" class="method item public">
  	<span class="method-signature">
  	<span class="name anchorable-toc">
  		<a class="fa fa-link toc-anchor" href="#method_setupDatabase"></a>
  		setupDatabase
  	</span>
  
  		<div class="args">
  			<span class="paren">(</span><ul class="args-list inline commas">
  				<li class="arg">
  						<code>db</code>
  				</li>
  			</ul><span class="paren">)</span>
  		</div>
  		<span class="returns-inline">
  			<span class="type">Dexie</span>
  		</span>
  	</span>
  
  
  
  		<span class="flag public">public</span>
  
  
  
  
  	<div class="meta">
  				<p>
  				Defined in
  		<a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L149">addon/services/indexed-db-configuration.js:149</a>
  		</p>
  
  
  
  	</div>
  
  	<div class="description"><p>Setup the database and do all necessary database migrations.</p>
  </div>
  
  		<div class="params">
  			<h4>Parameters:</h4>
  
  			<ul class="params-list">
  				<li class="param">
  						<code class="param-name">db</code>
  						<span class="type">Dexie</span>
  
  
  
  				</li>
  			</ul>
  		</div>
  
  		<div class="returns">
  			<h4>Returns:</h4>
  
  			<div class="returns-description">
  						<span class="type">Dexie</span>
  			</div>
  		</div>
  
  </div>
                  </div>
              </div>

              <div id="tab_properties" role="tabpanel" class="tab-pane">
                  <div class="item-list">
  <div id="property_currentVersion" class="property item public">
      <h3 class="name anchorable-toc">
          <a class="fa fa-link toc-anchor" href="#property_currentVersion"></a>
          currentVersion
      </h3>
      <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" class="crosslink external" target="_blank">Number</a></span>
  
  
          <span class="flag public">public</span>
  
  
  
      <div class="meta">
                  <p>
                  Defined in
          <a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L16">addon/services/indexed-db-configuration.js:16</a>
          </p>
  
  
      </div>
  
      <div class="description">
          <p>Increment this whenever you do a new database version.
  Set it to 1 on your initial version.</p>
  <p>For every version, you should provide a <code>versionX</code> property.
  Each of these properties should be an object with "stores" and/or "upgrade" properties.</p>
  <p>stores should be an object where the keys are dasherized, singular model names (e.g. task-item),
  and the value is a string with the indexedable fields.
  See <a href="https://github.com/dfahlander/Dexie.js/wiki/Version.stores()">https://github.com/dfahlander/Dexie.js/wiki/Version.stores()</a> for detailed options.</p>
  <p>upgrade is a function that gets a transaction as parameter, which can be used to run database migrations.
  See <a href="https://github.com/dfahlander/Dexie.js/wiki/Version.upgrade()">https://github.com/dfahlander/Dexie.js/wiki/Version.upgrade()</a> for detailed options/examples.</p>
  <p>Note that in newer versions of Dexie, you do not need to keep old version definitions anymnore, unless they contain upgrade instructions.
  Instead, each version has to contain the full, current schema (not just the updates to the last version).</p>
  <p>An example would be:</p>
  <pre class="code prettyprint"><code class="language-js">// You can delete this safely when adding version2, as it does not contain an upgrade
  version1 = {
     stores: {
       'task': '&amp;id*,isRead',
       'task-item': '&amp;id'
     }
  },
  
  version2 = {
      stores: {
       'task': '&amp;id*,isRead',
       'task-item': '&amp;id,*isNew'
     }
     upgrade: (transaction) =&gt; {
      transaction['task-item'].each((taskItem, cursor) =&gt; {
            taskItem.isNew = 0;
            cursor.update(taskItem);
           });
     }
  }
  </code></pre>
  <p>The
  You can also use upgrade/store without using the other option.</p>
  
      </div>
  
  
  
  </div>
  <div id="property_mapTable" class="property item protected">
      <h3 class="name anchorable-toc">
          <a class="fa fa-link toc-anchor" href="#property_mapTable"></a>
          mapTable
      </h3>
      <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
  
  
          <span class="flag protected">protected</span>
  
  
  
      <div class="meta">
                  <p>
                  Defined in
          <a href="https://github.com/mydea/ember-indexeddb/blob/v3.0.0-beta.1/addon/services/indexed-db-configuration.js#L67">addon/services/indexed-db-configuration.js:67</a>
          </p>
  
  
      </div>
  
      <div class="description">
          <p>The map functions for the tables.
  This should be an object with one key per table
  where the value is a function that takes an object and returns an object to save in IndexedDB.</p>
  <p>This object NEEDS to contain at least the properties id &amp; json.
  It should also contain one property per queryable property on the database table.</p>
  <p>There are a few things to note here:</p>
  <ol>
  <li>Always convert your IDs to strings. You can use the provided <code>this._toString(val)</code> function for this.</li>
  <li>Always clean up your json. You can use the provided <code>this._cleanObject(item)</code> for this.</li>
  <li>IndexedDB doesn't work with boolean queries. You need to convert booleans to 1/0 when inserting it into the Database.
  You can use the provided <code>this._toZeroOne(val)</code> for this.</li>
  </ol>
  <p>For example, the following table config:</p>
  <pre class="code prettyprint"><code class="language-js">{
     task: '++id,isRead,status,[isRead+status]'
  }
  </code></pre>
  <p>should look something like this:</p>
  <pre class="code prettyprint"><code class="language-js">return {
     task: (item) =&gt; {
       return {
         id: this._toString(item.id),
         json: this._cleanObject(item),
         isRead: this._toZeroOne(item.attributes.isRead),
         status: item.attributes.status
       };
     }
  };
  </code></pre>
  <p>Note that if you do not specify anything here, it will default to</p>
  <pre class="code prettyprint"><code class="language-js">return {
     id: this._toString(item.id),
     json: this._cleanObject(item)
  };
  </code></pre>
  
      </div>
  
  
  
  </div>
                  </div>
              </div>


      </div>
    </div>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/vendor/jquery/jquery.min.js"></script>
    <script src="../assets/vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
    <script src="../assets/vendor/github-slugger/slugger.js"></script>
    <script src="../assets/js/yuidoc-bootstrap.js"></script>
</body>
</html>
